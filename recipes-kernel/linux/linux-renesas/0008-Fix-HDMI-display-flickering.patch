From 2ed18c7edc9c2141fa46e97500a1ab4aef32311a Mon Sep 17 00:00:00 2001
From: Stanimir Bonev <bonev.stanimir@gmail.com>
Date: Mon, 18 Sep 2023 09:21:15 +0300
Subject: [PATCH] Fix HDMI display flickering

---
 drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c b/drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c
index 94ee3b2e9..b01ac337d 100644
--- a/drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c
+++ b/drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c
@@ -163,8 +163,9 @@ static int rzg2l_mipi_dsi_startup(struct rzg2l_mipi_dsi *mipi_dsi)
 		timings.tclk_post = 35;
 		timings.tclk_pre = 4;
 		timings.tclk_zero = 33;
-		timings.tlpx = 6;
-		timings.ths_prepare = 9;
+		// when some of tlpx and ths_prepare are other than 1 cause the display to flicker
+		timings.tlpx = 1;
+		timings.ths_prepare = 1;
 		timings.ths_settle = 9;
 		timings.ths_exit = 13;
 		timings.ths_trail = 9;
@@ -178,8 +179,8 @@ static int rzg2l_mipi_dsi_startup(struct rzg2l_mipi_dsi *mipi_dsi)
 		timings.tclk_post = 94;
 		timings.tclk_pre = 13;
 		timings.tclk_zero = 33;
-		timings.tlpx = 6;
-		timings.ths_prepare = 12;
+		timings.tlpx = 1;
+		timings.ths_prepare = 1;
 		timings.ths_settle = 9;
 		timings.ths_exit = 13;
 		timings.ths_trail = 17;
